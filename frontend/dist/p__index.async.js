"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[866],{84849:function(Cn,Oe,s){s.r(Oe),s.d(Oe,{default:function(){return vn}});var Xe=s(42805),qe=s(15009),h=s.n(qe),_e=s(99289),J=s.n(_e),et=s(64599),A=s.n(et),tt=s(5574),O=s.n(tt),I=s(67294),ue=s(71217),me=s(13448),Ee=s(16536),je=s(67040),_=s(97183),Ie=s(71230),ee=s(15746),ge=s(26713),G=s(84908),pe=s(34895),Be=s(62986),nt=s(37877),rt=s(26911),it=s(69015),at=s(13520),Se=s(18429),We=s(64789),ot=s(33160),st=s(48689),lt=s(32319),ut=s(26024),dt=s(52645),ct=s(80882),ht=s(12444),te=s.n(ht),ft=s(72004),ne=s.n(ft),vt=s(9783),p=s.n(vt),Ze=s(68949),mt=s(97857),w=s.n(mt),De="includeDirs",ye="protos";function gt(t,n,e){var i=A()(t.methods),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;if(n==o.serviceName&&o.name==e)return o}}catch(u){i.e(u)}finally{i.f()}return null}function be(t){for(var n=de(),e=0,i=n;e<i.length;e++){var a=i[e];if(a.path==t)return a}return null}function de(){var t=localStorage.getItem(ye);return t==null?[]:JSON.parse(t)}function pt(t){var n=A()(t),e;try{for(n.s();!(e=n.n()).done;){var i=e.value;Le(i)}}catch(a){n.e(a)}finally{n.f()}}function Le(t){for(var n=de(),e=0;e<n.length;e++)if(n[e].path===t.path){n.splice(e,1);break}n.push(t),localStorage.setItem(ye,JSON.stringify(n))}function St(t){var n=A()(t),e;try{for(n.s();!(e=n.n()).done;){var i=e.value;yt(i)}}catch(a){n.e(a)}finally{n.f()}}function yt(t){var n=be(t.path);if(n!=null){var e=w()(w()({},t),{},{host:n.host}),i=A()(e.methods),a;try{for(i.s();!(a=i.n()).done;){var o=a.value,u=gt(n,o.serviceName,o.name);if(u!=null){o.id=u.id,o.requestMds=u.requestMds,o.responseMds=u.responseMds;var d=o.requestBody?JSON.parse(o.requestBody):{},f=u.requestBody?JSON.parse(u.requestBody):{};for(var m in d)f[m]!=null&&(d[m]=f[m]);o.requestBody=JSON.stringify(d,null,"	")}}}catch(B){i.e(B)}finally{i.f()}Le(e)}}function wt(t){for(var n=de(),e=0;e<n.length;e++)if(n[e].path===t){n.splice(e,1);break}localStorage.setItem(ye,JSON.stringify(n))}function xt(){localStorage.removeItem(ye)}function Ct(t){var n=be(t);return n==null?[]:n.methods}function Y(){var t=localStorage.getItem(De);return t==null?[]:JSON.parse(t)}function Et(t){for(var n=Y(),e=0;e<n.length;e++)if(n[e]===t){n.splice(e,1);break}n.push(t),localStorage.setItem(De,JSON.stringify(n))}function jt(t){for(var n=Y(),e=0;e<n.length;e++)if(n[e]===t){n.splice(e,1);break}localStorage.setItem(De,JSON.stringify(n))}function It(){return window.go.main.Api.OpenIncludeDir()}function Bt(){return window.go.main.Api.OpenProto()}function Fe(t,n){return window.go.main.Api.ParseProto(t,n)}function Zt(t){return window.go.main.Api.Push(t)}function Dt(t){return window.go.main.Api.Send(t)}function bt(t){return window.go.main.Api.Stop(t)}var Lt=function(){function t(){te()(this,t),p()(this,"includeDirDrawerVisible",!1),p()(this,"includeDirs",[]),console.log("init paths store"),(0,Ze.ky)(this),this.init()}return ne()(t,[{key:"init",value:h()().mark(function n(){return h()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:this.includeDirs=Y();case 1:case"end":return i.stop()}},n,this)})},{key:"showIncludeDir",value:function(e){this.includeDirDrawerVisible=e}},{key:"addIncludeDir",value:h()().mark(function n(){var e;return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,It();case 2:e=a.sent,e.success&&e.data!=""&&(Et(e.data),this.includeDirs=Y());case 4:case"end":return a.stop()}},n,this)})},{key:"removeIncludeDir",value:h()().mark(function n(e){return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:jt(e),this.includeDirs=Y();case 2:case"end":return a.stop()}},n,this)})}]),t}(),kt=function(){function t(){te()(this,t),p()(this,"selectedTab","1"),p()(this,"openTabs",[]),console.log("init tab store"),(0,Ze.ky)(this)}return ne()(t,[{key:"selectTab",value:function(e){this.selectedTab=e}},{key:"setDot",value:function(e){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.openTabs.forEach(function(o,u){o.key==e&&(o.dot=a,i.openTabs.splice(u,1,o))})}},{key:"openTab",value:function(e){this.openTabs.length==1&&this.openTabs[0].key==="1"&&this.openTabs.splice(0,1);var i=this.openTabs.findIndex(function(a){return a.key===e.key});i==-1&&this.openTabs.push(e),this.selectedTab=e.key}},{key:"remove",value:function(e){var i=this;this.openTabs.forEach(function(a,o){if(a.key==e){if(i.openTabs.splice(o,1),i.openTabs.length==0)return;var u=o<i.openTabs.length?o:i.openTabs.length-1;i.selectedTab=i.openTabs[u].key}})}}]),t}(),re,l;(function(t){t[t.Text=0]="Text",t[t.Int8=1]="Int8",t[t.Int16LE=2]="Int16LE",t[t.Int16BE=3]="Int16BE",t[t.Int32LE=4]="Int32LE",t[t.Int32BE=5]="Int32BE",t[t.FloatLE=6]="FloatLE",t[t.FloatBE=7]="FloatBE",t[t.DoubleLE=8]="DoubleLE",t[t.DoubleBE=9]="DoubleBE",t[t.Uint8=10]="Uint8",t[t.Uint16LE=11]="Uint16LE",t[t.Uint16BE=12]="Uint16BE",t[t.Uint32LE=13]="Uint32LE",t[t.Uint32BE=14]="Uint32BE",t[t.BigInt64BE=15]="BigInt64BE",t[t.BigInt64LE=16]="BigInt64LE",t[t.BigUint64BE=17]="BigUint64BE",t[t.BigUint64LE=18]="BigUint64LE"})(l||(l={}));var Ne=new Map([[l.Text,"Text"],[l.Int8,"Int8"],[l.Int16LE,"Int16LE"],[l.Int16BE,"Int16BE"],[l.Int32LE,"Int32LE"],[l.Int32BE,"Int32BE"],[l.FloatLE,"FloatLE"],[l.FloatBE,"FloatBE"],[l.DoubleLE,"DoubleLE"],[l.DoubleBE,"DoubleBE"],[l.Uint8,"UInt8"],[l.Uint16LE,"Uint16LE"],[l.Uint16BE,"Uint16BE"],[l.Uint32LE,"Uint32LE"],[l.Uint32BE,"Uint32BE"],[l.BigInt64BE,"BigInt64BE"],[l.BigInt64LE,"BigInt64LE"],[l.BigUint64BE,"BigUint64BE"],[l.BigUint64LE,"BigUint64LE"]]),W;(function(t){t[t.Unary=0]="Unary",t[t.ClientStream=1]="ClientStream",t[t.ServerStream=2]="ServerStream",t[t.BidirectionalStream=3]="BidirectionalStream"})(W||(W={}));var Ut=(re={},p()(re,W.Unary,"Unary Call"),p()(re,W.ClientStream,"Client Stream"),p()(re,W.ServerStream,"Server Stream"),p()(re,W.BidirectionalStream,"Bi-Directional"),re),we;(function(t){t[t.Proto=0]="Proto",t[t.Env=1]="Env"})(we||(we={}));var Pt=s(52677),Mt=s.n(Pt),Re;(function(t){var n=function(){function e(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};te()(this,e),p()(this,"success",void 0),p()(this,"message",void 0),p()(this,"data",void 0),typeof i=="string"&&(i=JSON.parse(i)),this.success=i.success,this.message=i.message,this.data=i.data}return ne()(e,null,[{key:"createFrom",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new e(a)}}]),e}();t.R=n})(Re||(Re={}));var xe;(function(t){var n=function(){function i(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};te()(this,i),p()(this,"id",void 0),p()(this,"key",void 0),p()(this,"value",void 0),p()(this,"parseType",void 0),typeof a=="string"&&(a=JSON.parse(a)),this.id=a.id,this.key=a.key,this.value=a.value,this.parseType=a.parseType}return ne()(i,null,[{key:"createFrom",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new i(o)}}]),i}();t.Metadata=n;var e=function(){function i(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};te()(this,i),p()(this,"id",void 0),p()(this,"protoPath",void 0),p()(this,"serviceName",void 0),p()(this,"serviceFullyName",void 0),p()(this,"methodName",void 0),p()(this,"methodMode",void 0),p()(this,"host",void 0),p()(this,"body",void 0),p()(this,"mds",void 0),p()(this,"includeDirs",void 0),typeof a=="string"&&(a=JSON.parse(a)),this.id=a.id,this.protoPath=a.protoPath,this.serviceName=a.serviceName,this.serviceFullyName=a.serviceFullyName,this.methodName=a.methodName,this.methodMode=a.methodMode,this.host=a.host,this.body=a.body,this.mds=this.convertValues(a.mds,n),this.includeDirs=a.includeDirs}return ne()(i,[{key:"convertValues",value:function(o,u){var d=this,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!o)return o;if(o.slice)return o.map(function(j){return d.convertValues(j,u)});if(Mt()(o)==="object"){if(f){for(var m=0,B=Object.keys(o);m<B.length;m++){var C=B[m];o[C]=new u(o[C])}return o}return new u(o)}return o}}],[{key:"createFrom",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new i(o)}}]),i}();t.RequestData=e})(xe||(xe={}));function En(t){window.runtime.LogPrint(t)}function jn(t){window.runtime.LogTrace(t)}function In(t){window.runtime.LogDebug(t)}function Bn(t){window.runtime.LogInfo(t)}function Zn(t){window.runtime.LogWarning(t)}function Dn(t){window.runtime.LogError(t)}function bn(t){window.runtime.LogFatal(t)}function Ae(t,n,e){window.runtime.EventsOnMultiple(t,n,e)}function ke(t,n){Ae(t,n,-1)}function Ln(t){for(var n,e=arguments.length,i=new Array(e>1?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];return(n=window.runtime).EventsOff.apply(n,[t].concat(i))}function kn(t,n){Ae(t,n,1)}function Un(t){var n=[t].slice.call(arguments);return window.runtime.EventsEmit.apply(null,n)}function Pn(){window.runtime.WindowReload()}function Mn(){window.runtime.WindowReloadApp()}function On(){window.runtime.WindowSetSystemDefaultTheme()}function Wn(){window.runtime.WindowSetLightTheme()}function Fn(){window.runtime.WindowSetDarkTheme()}function Nn(){window.runtime.WindowCenter()}function Rn(t){window.runtime.WindowSetTitle(t)}function An(){window.runtime.WindowFullscreen()}function Tn(){window.runtime.WindowUnfullscreen()}function zn(){return window.runtime.WindowIsFullscreen()}function Vn(){return window.runtime.WindowGetSize()}function $n(t,n){window.runtime.WindowSetSize(t,n)}function Hn(t,n){window.runtime.WindowSetMaxSize(t,n)}function Kn(t,n){window.runtime.WindowSetMinSize(t,n)}function Jn(t,n){window.runtime.WindowSetPosition(t,n)}function Gn(){return window.runtime.WindowGetPosition()}function Yn(){window.runtime.WindowHide()}function Qn(){window.runtime.WindowShow()}function Xn(){window.runtime.WindowMaximise()}function qn(){window.runtime.WindowToggleMaximise()}function _n(){window.runtime.WindowUnmaximise()}function er(){return window.runtime.WindowIsMaximised()}function tr(){window.runtime.WindowMinimise()}function nr(){window.runtime.WindowUnminimise()}function rr(t,n,e,i){window.runtime.WindowSetBackgroundColour(t,n,e,i)}function ir(){return window.runtime.ScreenGetAll()}function ar(){return window.runtime.WindowIsMinimised()}function or(){return window.runtime.WindowIsNormal()}function sr(t){window.runtime.BrowserOpenURL(t)}function lr(){return window.runtime.Environment()}function ur(){window.runtime.Quit()}function dr(){window.runtime.Hide()}function cr(){window.runtime.Show()}var Ot=function(){function t(){te()(this,t),p()(this,"protos",[]),p()(this,"requestCaches",new Map),p()(this,"responseCaches",new Map),p()(this,"runningCaches",new Map),console.log("init rpc store"),(0,Ze.ky)(this),this.init()}return ne()(t,[{key:"init",value:function(){this.initProto(),this.onEndStream(),this.onResponse()}},{key:"initProto",value:function(){this.protos=de()}},{key:"onEndStream",value:function(){var e=this;ke("end",function(i){console.log("end data: ",i),e.runningCaches.set(i,!1)})}},{key:"onResponse",value:function(){var e=this;ke("data",function(i){console.log("Response data: ",i);var a=e.responseCaches.get(i.id);if(a==null){e.responseCaches.set(i.id,{body:i.body,mds:i.mds,streams:[i.body]});return}var o=a.streams;o!=null&&(o.unshift(i.body),e.responseCaches.set(i.id,w()(w()({},a),{},{streams:o,mds:i.mds})))})}},{key:"importProto",value:h()().mark(function n(){var e;return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Bt();case 2:if(e=a.sent,!(!e.success||e.data==null||e.data.length==0)){a.next=5;break}return a.abrupt("return",{success:!0});case 5:return a.next=7,Fe(e.data,Y());case 7:if(e=a.sent,e.success){a.next=10;break}return a.abrupt("return",e);case 10:return pt(e.data),this.initProto(),a.abrupt("return",{success:!0});case 13:case"end":return a.stop()}},n,this)})},{key:"reloadProto",value:h()().mark(function n(){var e,i;return h()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:debugger;return e=[],de().forEach(function(u){return e.push(u.path)}),console.log("reload proto req:",e),o.next=6,Fe(e,Y());case 6:if(i=o.sent,console.log("reload proto :",i),i.success){o.next=10;break}return o.abrupt("return",i);case 10:return St(i.data),this.initProto(),o.abrupt("return",{success:!0});case 13:case"end":return o.stop()}},n,this)})},{key:"deleteProto",value:h()().mark(function n(e){return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:wt(e),this.initProto();case 2:case"end":return a.stop()}},n,this)})},{key:"clearAll",value:h()().mark(function n(){return h()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:xt(),this.initProto();case 2:case"end":return i.stop()}},n,this)})},{key:"saveProto",value:h()().mark(function n(e,i,a){var o,u,d;return h()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(console.log("save proto method",a),o=be(e.path),o!=null){m.next=4;break}return m.abrupt("return");case 4:for(o.host=i,u=0;u<o.methods.length;u++)d=o.methods[u],d.id==a.id&&(o.methods[u]=a);Le(o),this.initProto(),Ee.ZP.success("Save configuration successfully.");case 9:case"end":return m.stop()}},n,this)})},{key:"send",value:h()().mark(function n(e){return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return this.removeCache(e.id),e.methodMode!=W.Unary&&this.runningCaches.set(e.id,!0),a.next=4,this.push(e,!1);case 4:case"end":return a.stop()}},n,this)})},{key:"push",value:h()().mark(function n(e,i){var a,o;return h()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(a=this.requestCaches.get(e.id),a==null?this.requestCaches.set(e.id,{streams:[e.body]}):(o=a.streams,o==null||o.unshift(e.body),this.requestCaches.set(e.id,{streams:o})),e.includeDirs=Y(),!i){d.next=8;break}return d.next=6,Zt(new xe.RequestData(e));case 6:d.next=11;break;case 8:return console.log("send request data",e),d.next=11,Dt(new xe.RequestData(e));case 11:case"end":return d.stop()}},n,this)})},{key:"removeCache",value:h()().mark(function n(e){return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:this.requestCaches.delete(e),this.responseCaches.delete(e),this.runningCaches.delete(e);case 3:case"end":return a.stop()}},n,this)})},{key:"stopStream",value:h()().mark(function n(e){return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("request stop stream"),a.next=3,bt(e);case 3:this.runningCaches.set(e,!1);case 4:case"end":return a.stop()}},n,this)})}]),t}(),Te=new Lt,ze=new kt,Ve=new Ot,ie=(0,I.createContext)({includeDirStore:Te,tabStore:ze,protoStore:Ve}),Wt=s(63463),T=s(71577),$e=s(95507),hr=s(70133),He=s(24969),Ft=s(97937),r=s(85893),Nt=function(){var n=(0,I.useContext)(ie),e=n.includeDirStore;return(0,r.jsx)(Wt.Z,{title:"Import Paths",placement:"left",width:500,open:e.includeDirDrawerVisible,onClose:function(){return e.showIncludeDir(!1)},style:{padding:5},bodyStyle:{padding:5},extra:(0,r.jsx)(T.Z,{type:"link",icon:(0,r.jsx)(He.Z,{}),onClick:function(){return e.addIncludeDir()},children:"Add Path"}),children:(0,r.jsx)($e.ZP,{size:"large",loadMore:(0,r.jsx)("div",{}),dataSource:e.includeDirs,renderItem:function(a){return(0,r.jsx)($e.ZP.Item,{actions:[(0,r.jsx)("a",{onClick:function(){return e.removeIncludeDir(a)},children:(0,r.jsx)(Ft.Z,{})})],children:a})}})})},Rt=(0,ue.Pi)(Nt),N={header:"header___tHXcr",requestStreamHeight:"requestStreamHeight___LV6s3",metadataColumn:"metadataColumn___o3Lum",operatorBtn:"operatorBtn___dpSJd"},At=function(){var n=(0,I.useContext)(ie),e=n.tabStore,i=n.protoStore,a=n.includeDirStore,o=(0,I.useState)(!1),u=O()(o,2),d=u[0],f=u[1],m=(0,I.useState)([]),B=O()(m,2),C=B[0],j=B[1],c=(0,I.useState)(""),Z=O()(c,2),L=Z[0],oe=Z[1],fe=(0,I.useState)(!0),Q=O()(fe,2),se=Q[0],X=Q[1],ve=(0,I.useState)(),F=O()(ve,2),D=F[0],P=F[1],$=function(v){f(v),v||oe("")},k=function(v){j(v),X(!1)},g=function(v){var y=new Set,S=A()(i.protos),E;try{for(S.s();!(E=S.n()).done;){var z=E.value;z.name.toLowerCase().indexOf(v.toLowerCase())>-1&&y.add(z.path);var M=A()(z.methods),V;try{for(M.s();!(V=M.n()).done;){var U=V.value;U.serviceName.toLowerCase().indexOf(v.toLowerCase())>-1&&y.add(z.path+U.serviceName),U.name.toLowerCase().indexOf(v.toLowerCase())>-1&&y.add(U.id)}}catch(R){M.e(R)}finally{M.f()}}}catch(R){S.e(R)}finally{S.f()}return Array.from(y)},H=function(v){var y=v.target.value,S=g(y);j(S),oe(y),X(!0)},x=function(v,y){var S=v.toLowerCase().indexOf(L.toLowerCase()),E=v.substring(0,S),z=v.substring(S,S+L.length),M=v.slice(S+L.length),V=S>-1?(0,r.jsxs)("span",{children:[E,(0,r.jsx)("span",{style:{color:"#f50"},children:z}),M]}):(0,r.jsx)("span",{children:v});return V},mn=function(v){var y=[],S=A()(v),E;try{var z=function(){var U=E.value,R={id:U.path,isProto:!0,name:U.name,title:(0,r.jsx)("span",{style:{width:"100%"},children:x(U.name,L)}),icon:(0,r.jsx)(rt.Z,{}),children:[]};if(!U.methods)return"continue";var le=new Map;U.methods.forEach(function(K,q,xn){var Ce=le.get(K.serviceFullyName);Ce==null&&(Ce=[]),Ce.push({proto:{path:U.path,host:U.host},method:K,title:x(K.name,L),icon:(0,r.jsx)(it.Z,{})}),le.set(K.serviceFullyName,Ce)}),le.forEach(function(K,q,xn){R.children.push({id:U.path+q,title:x(q,L),icon:(0,r.jsx)(at.Z,{}),children:K})}),y.push(R)};for(S.s();!(E=S.n()).done;)var M=z()}catch(V){S.e(V)}finally{S.f()}return y},gn=function(v,y){P(void 0),y.node.isProto&&P({id:y.node.id,name:y.node.name}),y.node.method&&e.openTab({key:v[0].toString(),params:{proto:y.node.proto,method:y.node.method},type:we.Proto})},pn=function(){var b=J()(h()().mark(function v(){var y;return h()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,i.importProto();case 2:y=E.sent,y.success||me.Z.open({message:"Error while importing protos",description:y.message,icon:(0,r.jsx)(Se.Z,{style:{color:"red"}})});case 4:case"end":return E.stop()}},v)}));return function(){return b.apply(this,arguments)}}(),Sn=function(){var b=J()(h()().mark(function v(){var y;return h()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:debugger;return E.next=3,i.reloadProto();case 3:if(y=E.sent,y.success){E.next=7;break}return me.Z.open({message:"Error while reload protos",description:y.message,icon:(0,r.jsx)(Se.Z,{style:{color:"red"}})}),E.abrupt("return");case 7:Ee.ZP.success("Reload protos successful.");case 8:case"end":return E.stop()}},v)}));return function(){return b.apply(this,arguments)}}(),yn=function(){var b=J()(h()().mark(function v(){return h()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(D!=null){S.next=3;break}return Ee.ZP.warn("Please select the deleted proto."),S.abrupt("return");case 3:je.Z.confirm({title:"Confirm delete proto",content:"Do you want to remove the proto configuration ".concat(D.name,"?"),onOk:function(){var z=Ct(D.id),M=A()(z),V;try{for(M.s();!(V=M.n()).done;){var U=V.value,R=A()(e.openTabs),le;try{for(R.s();!(le=R.n()).done;){var K=le.value;if(K.key==U.id){e.remove(K.key);break}}}catch(q){R.e(q)}finally{R.f()}}}catch(q){M.e(q)}finally{M.f()}i.deleteProto(D.id),P(void 0)}});case 4:case"end":return S.stop()}},v)}));return function(){return b.apply(this,arguments)}}(),wn=function(){var b=J()(h()().mark(function v(){return h()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:je.Z.confirm({title:"Confirm clear all proto",content:"Do you want to clear all proto configuration ?",onOk:function(){i.clearAll(),P(void 0)}});case 1:case"end":return S.stop()}},v)}));return function(){return b.apply(this,arguments)}}(),Qe=mn(i.protos);return(0,r.jsxs)(_.Z,{style:{height:"100%"},children:[(0,r.jsx)(_.Z.Header,{style:{padding:0,backgroundColor:"white",height:"44px",lineHeight:"44px",borderBottom:"1px solid #f0f0f0"},children:(0,r.jsxs)(Ie.Z,{children:[(0,r.jsx)(ee.Z,{flex:"auto",style:{paddingLeft:10,fontSize:18},children:"upRpc"}),(0,r.jsx)(ee.Z,{flex:"100px",children:(0,r.jsxs)(ge.Z,{size:8,style:{paddingRight:10},children:[(0,r.jsx)(G.Z,{title:"Import protos",children:(0,r.jsx)("a",{className:N.operatorBtn,onClick:pn,children:(0,r.jsx)(We.Z,{})})}),(0,r.jsx)(G.Z,{title:"Reload protos",children:(0,r.jsx)("a",{className:N.operatorBtn,onClick:Sn,children:(0,r.jsx)(ot.Z,{})})}),(0,r.jsx)(G.Z,{title:"Delete selectecd proto",children:(0,r.jsx)("a",{className:N.operatorBtn,onClick:yn,children:(0,r.jsx)(st.Z,{})})}),(0,r.jsx)(G.Z,{title:"Import dependency paths",children:(0,r.jsx)("a",{className:N.operatorBtn,onClick:function(){return a.showIncludeDir(!a.includeDirDrawerVisible)},children:(0,r.jsx)(lt.Z,{})})}),(0,r.jsx)(G.Z,{title:"Filter methods",children:(0,r.jsx)("a",{className:N.operatorBtn,onClick:function(){return $(!d)},children:(0,r.jsx)(ut.Z,{})})}),(0,r.jsx)(G.Z,{title:"Clear",children:(0,r.jsx)("a",{className:N.operatorBtn,onClick:function(){return wn()},children:(0,r.jsx)(dt.Z,{})})})]})})]})}),(0,r.jsxs)(_.Z.Content,{style:{backgroundColor:"white",overflow:"auto"},children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(pe.Z,{size:"small",placeholder:"Filter Methods",hidden:!d,onChange:H,value:L,style:{marginBottom:5}}),Qe.length==0?(0,r.jsx)("div",{style:{height:"90%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(Be.Z,{description:"No proto"})}):(0,r.jsx)(nt.Z.DirectoryTree,{onExpand:k,fieldNames:{key:"id",title:"title",children:"children"},expandedKeys:C,autoExpandParent:se,onSelect:gn,switcherIcon:(0,r.jsx)(ct.Z,{}),defaultExpandedKeys:["0-0-0"],treeData:Qe})]}),(0,r.jsx)(Rt,{})]})]})},Tt=(0,ue.Pi)(At),ce=s(70524),ae=s(21369),zt=s(63922),Ue=s(80284),Vt=s(99611),Ke=s(93045),Je=s(33859),$t=function(){var n=(0,I.useContext)(ie),e=n.protoStore,i=function(){var a=J()(h()().mark(function o(){var u;return h()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,e.importProto();case 2:u=f.sent,u.success||me.Z.open({message:"Error while importing protos",description:u.message,icon:(0,r.jsx)(Se.Z,{style:{color:"red"}})});case 4:case"end":return f.stop()}},o)}));return function(){return a.apply(this,arguments)}}();return(0,r.jsx)("div",{style:{height:"90%",width:"90%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(Je.ZP,{icon:(0,r.jsx)(Ke.Z,{style:{fontSize:120}}),title:"Welcome to use upRpc",subTitle:"Swim in the ocean of knowledge and enjoy it.",extra:(0,r.jsx)(T.Z,{type:"primary",onClick:function(){return i()},icon:(0,r.jsx)(He.Z,{}),children:"Import Protos"})})})},Ht=(0,ue.Pi)($t),Kt=s(36027),Jt=s(28280),Gt=s(27496),Yt=s(74842),Qt=s(60219),he=s(1769),Ge=s(54907),Ye=function(t){var n=t.value,e=(0,I.useState)("1"),i=O()(e,2),a=i[0],o=i[1];return n==null?(0,r.jsx)(Be.Z,{image:Be.Z.PRESENTED_IMAGE_SIMPLE}):(0,r.jsx)(Ge.Z,{activeKey:a,accordion:!0,onChange:function(d){return o(d)},children:n==null?void 0:n.map(function(u,d){return u==null||u==""?!0:(0,r.jsx)(Ge.Z.Panel,{header:"stream-"+((n==null?void 0:n.length)-d),children:(0,r.jsx)("pre",{style:{padding:0},children:u})},d+1)})})},Pe=s(52300);function Xt(t,n){if(l.Text==n)return Pe.DS.encode(t);var e=new DataView(new ArrayBuffer(16));switch(n){case l.Int8:e.setInt8(0,t);break;case l.Int16LE:e.setInt16(0,t,!0);break;case l.Int16BE:e.setInt16(0,t,!1);break;case l.Int32LE:e.setInt32(0,t,!0);break;case l.Int32BE:e.setInt32(0,t,!1);break;case l.FloatLE:e.setFloat32(0,t,!0);break;case l.FloatBE:e.setFloat32(0,t,!1);break;case l.DoubleLE:e.setFloat64(0,t,!0);break;case l.DoubleBE:e.setFloat64(0,t,!1);break;case l.Uint8:e.setUint8(0,t);break;case l.Uint16LE:e.setUint16(0,t,!0);break;case l.Uint16BE:e.setUint16(0,t,!1);break;case l.Uint32LE:e.setUint32(0,t,!0);break;case l.Uint32BE:e.setUint32(0,t,!1);break;case l.BigInt64LE:e.setBigInt64(0,t,!0);break;case l.BigInt64BE:e.setBigInt64(0,t,!1);break;case l.BigUint64LE:e.setBigUint64(0,t,!0);break;case l.BigUint64BE:e.setBigInt64(0,t,!1);break}return Pe.DS.encode(t)}function qt(t,n){try{if(t=Pe.DS.toUint8Array(t),l.Text==n){var e=new TextDecoder().decode(t);return e}var i=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(n){case l.Int8:return i.getInt8(0).toString();case l.Int16LE:return i.getInt16(0,!0).toString();case l.Int16BE:return i.getInt16(0,!1).toString();case l.Int32LE:return i.getInt32(0,!0).toString();case l.Int32BE:return i.getInt32(0,!1).toString();case l.FloatLE:return i.getFloat32(0,!0).toString();case l.FloatBE:return i.getFloat32(0,!1).toString();case l.DoubleLE:return i.getFloat64(0,!0).toString();case l.DoubleBE:return i.getFloat64(0,!1).toString();case l.Uint8:return i.getUint8(0).toString();case l.Uint16LE:return i.getUint16(0,!0).toString();case l.Uint16BE:return i.getUint16(0,!1).toString();case l.Uint32LE:return i.getUint32(0,!0).toString();case l.Uint32BE:return i.getUint32(0,!1).toString();case l.BigInt64LE:return i.getBigInt64(0,!0).toString().toString();case l.BigInt64BE:return i.getBigInt64(0,!1).toString();case l.BigUint64LE:return i.getBigUint64(0,!0).toString();case l.BigUint64BE:return i.getBigInt64(0,!1).toString();default:return"[Buffer ... "+t.length+" bytes]"}}catch{return"decode error"}}var _t=function(t){var n=t.method,e=t.responseCache,i=t.onChange,a=function(C,j,c){if(console.log(" response mds: ",n.responseMds),n.responseMds==null)n.responseMds=[];else for(var Z=0;Z<n.responseMds.length;Z++)n.responseMds[Z].id==C&&n.responseMds.splice(Z,1);n.responseMds.push({id:C,key:j,parseType:c}),i(w()({},n))},o=function(C){if(n.responseMds==null)return 0;var j=A()(n.responseMds),c;try{for(j.s();!(c=j.n()).done;){var Z=c.value;if(Z.id==C)return Z.parseType}}catch(L){j.e(L)}finally{j.f()}return 0},u=[{title:"KEY",dataIndex:"key",key:"name",width:"200px"},{title:"VALUE",dataIndex:"value",key:"value",render:function(C,j){return(0,r.jsx)(en,{id:j.id,value:j.value,parseType:o(j.id),onChange:function(Z,L){return a(Z,j.key,L)}})}}],d=(0,r.jsx)(r.Fragment,{});(e==null?void 0:e.mds)!=null&&(d=(0,r.jsxs)(r.Fragment,{children:[" (",e.mds.length,")"]}));var f=n.mode==W.ServerStream||n.mode==W.BidirectionalStream?{key:"response",label:"Response Stream",children:(0,r.jsx)(Ye,{value:e==null?void 0:e.streams})}:{key:" response",label:"Response",children:(0,r.jsx)("pre",{children:e==null?void 0:e.body})};console.log("responseCache: ",e);var m=[f,{label:(0,r.jsxs)(r.Fragment,{children:["Metadata",d]}),key:"matadata",children:(0,r.jsx)(he.Z,{size:"small",bordered:!0,pagination:!1,columns:u,rowKey:"id",dataSource:e==null?void 0:e.mds})}];return(0,r.jsx)(Ue.Z,{style:{height:"100%"},animated:!1,items:m})},en=function(n){var e=n.id,i=n.value,a=n.parseType,o=n.onChange,u=[];return Ne.forEach(function(d,f){return u.push((0,r.jsx)(ae.Z.Option,{value:f.toString(),children:d},f))}),(0,r.jsxs)(Ie.Z,{children:[(0,r.jsx)(ee.Z,{flex:"auto",style:{display:"flex",alignItems:"center"},children:qt(i,a)}),(0,r.jsx)(ee.Z,{flex:"100px",children:(0,r.jsx)(ae.Z,{defaultValue:a.toString(),bordered:!1,onChange:function(f){return o(e,Number.parseInt(f))},style:{width:140},children:u},"s1"+e)})]})},tn=s(19632),Me=s.n(tn),nn=s(81474),rn=s(74981),fr=s(90252),vr=s(82679),an=s(16596),on=s(3089),sn=function(t){var n=t.running,e=t.method,i=t.requestCache,a=t.onChange,o=t.onPush,u=(0,I.useState)(e.requestBody),d=O()(u,2),f=d[0],m=d[1],B=function(D){a&&a(w()(w()({},e),{},{requestBody:D})),m(D)},C=(0,I.useState)(e.requestMds==null?[]:e.requestMds),j=O()(C,2),c=j[0],Z=j[1],L=function(D){c[D.id]=D,Z(Me()(c)),a&&a(w()(w()({},e),{},{requestMds:c}))},oe=function(){c.push({parseType:0,id:""+c.length,key:"",value:""}),Z(Me()(c))},fe=function(D){c.splice(D,1),Z(Me()(c)),a&&a(w()(w()({},e),{},{requestMds:c}))},Q=(0,r.jsx)(r.Fragment,{});c!==null&&c.length>0&&(Q=(0,r.jsxs)(r.Fragment,{children:[" (",c.length,")"]}));var se=e.mode==W.ClientStream||e.mode==W.BidirectionalStream,X=n&&se?(0,r.jsx)(T.Z,{size:"small",type:"primary",icon:(0,r.jsx)(an.Z,{}),onClick:function(){return o(f)},children:"Push"}):"",ve=[{label:"Params",key:"params",children:(0,r.jsx)(rn.ZP,{style:{background:"#fff"},width:"100%",height:"100%",mode:"json",theme:"textmate",name:"inputs",fontSize:13,cursorStart:2,showPrintMargin:!1,showGutter:!0,onChange:B,defaultValue:e.requestBody,setOptions:{useWorker:!0,displayIndentGuides:!0},tabSize:2})},{label:(0,r.jsxs)(r.Fragment,{children:["Metadata",Q]}),key:"metadata",children:(0,r.jsxs)(he.Z,{rowKey:"id",size:"small",bordered:!0,pagination:!1,dataSource:c,children:[(0,r.jsx)(he.Z.Column,{className:N.metadataColumn,dataIndex:"key",title:"KEY",width:"30%",render:function(D,P,$){return(0,r.jsx)(pe.Z,{defaultValue:P.key,onChange:function(g){return L(w()(w()({},P),{},{key:g.target.value}))}},"key"+P.id)}},"key"),(0,r.jsx)(he.Z.Column,{className:N.metadataColumn,dataIndex:"value",title:"VALUE",render:function(D,P,$){return(0,r.jsx)(ln,{metadata:P,onChange:function(g){return L(w()(w()({},g),{},{key:P.key}))}})}},"value"),(0,r.jsx)(he.Z.Column,{className:N.metadataColumn,dataIndex:"action",align:"center",width:80,title:(0,r.jsx)(G.Z,{title:"Add metadata",children:(0,r.jsx)(T.Z,{size:"small",type:"text",icon:(0,r.jsx)(We.Z,{}),onClick:oe})}),render:function(D,P,$){return(0,r.jsx)(G.Z,{title:"Delete metadata",placement:"bottom",children:(0,r.jsx)(T.Z,{size:"small",type:"text",icon:(0,r.jsx)(on.Z,{}),onClick:function(){return fe($)}})})}},"action")]})}];return(0,r.jsxs)(ce.oL,{children:[(0,r.jsx)(Ue.Z,{style:{height:"100%"},animated:!1,items:ve,tabBarExtraContent:(0,r.jsx)("div",{style:{paddingRight:10},children:X})}),(0,r.jsx)(ce.oL.Pane,{visible:se,className:N.requestStreamHeight,children:(0,r.jsx)(nn.Z,{title:"Request Stream",size:"small",bordered:!1,style:{height:"100%",marginTop:"3px"},bodyStyle:{height:"calc(100% - 40px)",overflow:"auto",padding:0},children:(0,r.jsx)(Ye,{value:i==null?void 0:i.streams})})})]})},ln=function(n){var e=n.metadata,i=n.onChange,a=(0,I.useState)(e),o=O()(a,2),u=o[0],d=o[1],f=function(C){d(C),i(C)},m=[];return Ne.forEach(function(B,C){return m.push((0,r.jsx)(ae.Z.Option,{value:C.toString(),children:B},C))}),(0,r.jsxs)("div",{style:{display:"flex"},children:[(0,r.jsx)(pe.Z,{defaultValue:u.value,onChange:function(C){return f(w()(w()({},u),{},{value:C.target.value}))}},"v"+u.id),e.key.endsWith("-bin")?(0,r.jsx)(ae.Z,{defaultValue:u.parseType.toString(),bordered:!1,onChange:function(C){return f(w()(w()({},u),{},{parseType:Number.parseInt(C)}))},style:{width:140},children:m},"s"+u.id):""]})},un=function(n){var e=n.proto,i=n.method,a=(0,I.useContext)(ie),o=a.protoStore,u=a.tabStore,d=(0,I.useState)(e.host),f=O()(d,2),m=f[0],B=f[1],C=(0,I.useState)(i),j=O()(C,2),c=j[0],Z=j[1],L=function(g){u.setDot(c.id),B(g)},oe=function(g){u.setDot(g.id),Z(w()(w()({},g),{},{requestBody:g.requestBody,requestMds:g.requestMds}))},fe=function(g){u.setDot(g.id),Z(w()(w()({},g),{},{responseMds:g.responseMds}))},Q=function(){var g=[];return c.requestMds!=null&&c.requestMds.length>0&&(g=c.requestMds.map(function(H,x){return w()(w()({},H),{},{key:H.key,value:Xt(H.value,H.parseType)})})),{id:c.id,body:c.requestBody,mds:g,methodMode:c.mode,methodName:c.name,serviceFullyName:c.serviceFullyName,serviceName:c.serviceName,protoPath:e.path,host:m}},se=function(){var k=J()(h()().mark(function g(){return h()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,o.push(Q(),!0);case 2:case"end":return x.stop()}},g)}));return function(){return k.apply(this,arguments)}}(),X=function(){var k=J()(h()().mark(function g(){return h()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.prev=0,x.next=3,o.send(Q());case 3:x.next=8;break;case 5:x.prev=5,x.t0=x.catch(0),me.Z.open({message:"Calling error",description:x.t0.message,icon:(0,r.jsx)(Se.Z,{style:{color:"red"}})});case 8:case"end":return x.stop()}},g,null,[[0,5]])}));return function(){return k.apply(this,arguments)}}(),ve=function(){var k=J()(h()().mark(function g(){return h()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,o.stopStream(c.id);case 2:case"end":return x.stop()}},g)}));return function(){return k.apply(this,arguments)}}(),F=function(){o.saveProto(e,m,c),u.setDot(c.id,!1)},D=o.requestCaches.get(c.id),P=o.responseCaches.get(c.id),$=o.runningCaches.get(c.id);return console.log("running: ",$),(0,r.jsxs)(_.Z,{style:{height:"100%",backgroundColor:"white",padding:"0px 10px"},children:[(0,r.jsx)(_.Z.Header,{className:N.header,style:{paddingBottom:10},children:(0,r.jsxs)(Ie.Z,{gutter:5,children:[(0,r.jsx)(ee.Z,{flex:"auto",style:{paddingTop:5},children:(0,r.jsx)(pe.Z,{addonBefore:(0,r.jsxs)(ge.Z,{style:{width:110},children:[(0,r.jsx)(Kt.Z,{}),Ut[c.mode]]}),defaultValue:m,onChange:function(g){return L(g.target.value)}})}),(0,r.jsx)(ee.Z,{flex:"160px",children:(0,r.jsxs)(ge.Z,{children:[$?(0,r.jsx)(T.Z,{type:"primary",icon:(0,r.jsx)(Jt.Z,{}),onClick:ve,children:"Stop"}):c.mode==W.Unary?(0,r.jsx)(T.Z,{type:"primary",icon:(0,r.jsx)(Gt.Z,{}),onClick:X,children:"Send"}):(0,r.jsx)(T.Z,{type:"primary",icon:(0,r.jsx)(Yt.Z,{}),onClick:X,children:"Start"}),(0,r.jsx)(T.Z,{icon:(0,r.jsx)(Qt.Z,{}),onClick:F,children:"Save"})]})})]})}),(0,r.jsx)(_.Z.Content,{children:(0,r.jsxs)(ce.oL,{vertical:!0,children:[(0,r.jsx)(sn,{running:$,method:c,requestCache:D,onChange:oe,onPush:se}),(0,r.jsx)(_t,{method:c,responseCache:P,onChange:fe})]})})]})},dn=(0,ue.Pi)(un),cn=function(){var n=(0,I.useContext)(ie),e=n.tabStore,i=n.protoStore,a=function(f,m){typeof f=="string"&&(e.remove(f),i.removeCache(f))},o=(0,r.jsxs)(ge.Z,{size:0,style:{marginRight:10},children:[(0,r.jsx)(ae.Z,{defaultValue:"1",style:{width:180},bordered:!1,children:(0,r.jsx)(ae.Z.Option,{value:"1",children:"No Environment"})}),(0,r.jsx)(T.Z,{type:"text",icon:(0,r.jsx)(Vt.Z,{}),size:"large"})]});if(e.openTabs.length==0)return(0,r.jsx)(Ht,{});var u=e.openTabs.map(function(d){var f=(0,r.jsx)(r.Fragment,{}),m=d.title;return d.type==we.Proto&&(m=d.params.method.name,f=(0,r.jsx)(dn,{proto:d.params.proto,method:d.params.method})),{label:(0,r.jsx)(zt.Z,{dot:d.dot,offset:[5,8],children:m}),key:d.key,closeable:d.closable,children:f}});return(0,r.jsx)(Ue.Z,{hideAdd:!0,type:"editable-card",onEdit:a,style:{height:"100%"},size:"small",items:u,onTabClick:function(f){return e.selectTab(f)},activeKey:e.selectedTab})},hn=(0,ue.Pi)(cn),fn=function(){(0,I.useEffect)(function(){ke("about",function(){console.log("about message: ",!0),i(!0)})},[]);var t=(0,I.useState)(!1),n=O()(t,2),e=n[0],i=n[1],a=function(){i(!1)};return(0,r.jsx)(je.Z,{title:"About Uprpc",open:e,onCancel:a,footer:null,children:(0,r.jsx)(Je.ZP,{icon:(0,r.jsx)(Ke.Z,{style:{fontSize:50}}),title:"Uprpc",subTitle:(0,r.jsxs)("div",{children:["version 1.0.0",(0,r.jsx)("br",{}),"Copyright (c) 2022 upbos. All rights reserved."]})})})};function vn(){return(0,r.jsx)(ie.Provider,{value:{includeDirStore:Te,tabStore:ze,protoStore:Ve},children:(0,r.jsxs)(Xe.ZP,{children:[(0,r.jsxs)(ce.oL,{defaultSizes:[75,220],children:[(0,r.jsx)(ce.oL.Pane,{minSize:320,maxSize:600,children:(0,r.jsx)(Tt,{})}),(0,r.jsx)(hn,{})]}),(0,r.jsx)(fn,{})]})})}}}]);
